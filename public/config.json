{
    "uiSchema": {
        "ui:description": { "__html": "<p>Please read <a href='http://www.larkcamp.com/campterms.htm' target='_blank'>Terms of Registration</a> before filling out this form.</p><p>You can submit your registration online here and we will hold your spot. First come, first served.</p><p><p><em>2020 Registration Is Now Open</em></p><p>Registrations are processed in the order they are received.</p><p>Registering by Mail:</p><p>Register now and your check will not be cashed or credit card run until January 2020<br>If you do not wish to register online, you can fill out and print out this form, or you can download a shorter PDF registration form (4 pages) at:<br><a href='http://www.larkcamp.com/regform.pdf' target='_blank'>2020 Mail In Registration Form</a> Mail a check or money order payable to Lark Camp or fill out your credit card information on the form:<br>Lark Camp, P.O. Box 1176, Mendocino, CA 95460 USA</p><p>Fields with a * are required fields.<br>When filling out this form please do not make any carriage returns or blank lines.<br>PLEASE DO NOT FILL OUT THIS FORM UNLESS YOU INTEND TO COMMIT TO YOUR RESERVATION.</p>" },
        "payer_billing_address": {
            "contentClassNames": "row",
            "street_address":       { "classNames": "col-xs-12 col-sm-12" },
            "city":                 { "classNames": "col-xs-12 col-sm-12"  },
            "state_or_province":    { "classNames": "col-xs-6  col-sm-6"  },
            "zip_code":             { "classNames": "col-xs-6  col-sm-6"  },
            "country":              { "classNames": "col-xs-12 col-sm-6"  }
        },
        "payer_email": {
            "ui:help": "VERY IMPORTANT FOR ALL COMMUNICATIONS - If none must put NONE@NONE.COM"
        },
        "payer_number": {
            "ui:help": "If none put NONE",
            "ui:options": {
                "inputType": "tel"
            }
        },
        "payment_type": {
            "ui:description": { "__html": "<p>Full Price - payment by credit card or Paypal</p><p>Discount Price - payment by personal check, bank check, or money order</p><p>All further payments must be made by the same method.<p>" }
        },
        "parking_passes": {
            "ui:description": { "__html": "<p><strong>REQUIRED PARKING PASSES</strong><br>Pre-Purchase parking passes for Lark Camp $60.00 Discount Price ($62.00 Full Price)<br>Your parking pass will be given to you when you arrive at Lark Camp.</p><p><strong>ALL vehicles and trailers at camp are required to have a parking pass. If you have a car and a trailer you will need 2 parking passes.</strong></p><p>We are required to have less vehicles at camp. Carpooling is encouraged. If you can offer or need a ride please use the Lark Camp Carpool Webpage to organize carpools.</p><p>If you are not sure that you will bring a vehicle to camp, you can pre-purchase a parking pass anytime before June 22.<br>If you pre-purchase a parking pass and then do not bring a vehicle, contact us after camp for a refund.<br></p><p>You may purchase a parking pass on your way into Lark Camp by cash or check (no credit cards at camp) for $70.00.</p><p>If your vehicle, or combined vehicle and trailer, is over 20', call for availability before registering. There is an additional surcharge for long vehicles.</p>" }
        },
        "campers": {
            "items": {
                "age": {
                    "ui:help": "If registrant is under 18 please note age here."
                },
                "session": {
                    "ui:description": { "__html": "<p>Full camp starts on Friday, July 26 at 3pm and ends Saturday morning August 3. The first half of camp starts on Friday, July 26 at 3pm and ends before noon on Tuesday, JULY 30. The second half of camp starts Tuesday noon on July 30 and ends Saturday morning August 3.</p><p>∆ \"Kid Special\" If you are paying for a child 11 or under, you can receive a discount rate by teaching a daily children's workshop at camp. <a href='http://www.larkcamp.com/kidworkshp.htm' target='_blank'>For More Information</a> about offering children's workshops.</p><ul><li>Full camp (adult): $784 ($764 discount price)</li><li>Full camp (11 or under): $596 ($576 discount price)</li><li>Half camp (adult): $596 ($586 discount price)</li><li>Half camp (11 or under): $484 ($474 discount price)</li></ul>" }
                },
                "accomodations": {
                    "cabinmates": {
                        "ui:description": "Let us know and we will try to accommodate your request."
                    },
                    "tenting_area_preference": {
                        "ui:description": { "__html": "<p>Fill in your tenting preference below. To see a map of camp click on the links to open another window. Area A-C are in <a href='http://www.larkcamp.com/giffiles/campgraphics/camp1.gif' target='_blank'>Camp One</a>, D-H are in <a href='http://www.larkcamp.com/giffiles/campgraphics/camp2.gif' target='_blank'>Camp Two</a>, I-L are in <a href='http://www.larkcamp.com/giffiles/campgraphics/camp3.gif' target='_blank'>Camp Three</a></p>" }
                    }
                },
                "meals": {
                    "ui:description": { "__html": "<p>You must pay for 100% of your meal ticket at one time. Meal tickets must be paid for in full prior to camp. Food prices include sales tax. No meal tickets sold after June 22. You may buy individual meals at camp instead of buying a meal ticket (it costs more though).</p><p>Click here for <a href='http://www.larkcamp.com/AtCampMealTickets.pdf' target='_blank'>At Camp Meal Pricing</a></p><p><strong>Meal Pricing (adult / child 11 or under)</strong></p><ul><li>Full Camp, All Meals $406 / $304</li><li>Full Camp, Just Dinners: $230 / $166</li><li>Half Camp, All Meals: $230 / $166</li></ul>" }
                }
            }
        },
        "comments": {
            "ui:widget": "textarea",
            "ui:options": {
              "rows": 5
            }
        },
        "tshirt_sizes": {
            "contentClassNames": "row",
            "small":  { "classNames": "col-xs-4 col-sm-2" },
            "medium": { "classNames": "col-xs-4 col-sm-2" },
            "large":  { "classNames": "col-xs-4 col-sm-2" },
            "xl":     { "classNames": "col-xs-4 col-sm-2" },
            "xxl":    { "classNames": "col-xs-4 col-sm-2" },
            "ui:description": { "__html": "<p>XXL: $16, all other sizes $14. All shirt prices include sales tax.<br><a href='https://www.larkcamp.com/shirt.html' target='_blank'>More Information About Lark Camp Shirts</a></p>" }
        },
        "sweatshirt_sizes": {
            "contentClassNames": "row",
            "small":  { "classNames": "col-xs-4 col-sm-2" },
            "medium": { "classNames": "col-xs-4 col-sm-2" },
            "large":  { "classNames": "col-xs-4 col-sm-2" },
            "xl":     { "classNames": "col-xs-4 col-sm-2" },
            "xxl":    { "classNames": "col-xs-4 col-sm-2" },
            "ui:description": { "__html": "<p>XXL: $24, all other sizes $22.</p>" }
        },
        "lta_donation": {
            "ui:description": { "__html": "<p><strong>MAKE A TAX DEDUCTIBLE DONATION</strong><br>Lark Camp identifies outstanding instructors some of which live a great distance from where Lark Camp is held. Funding is needed to bring instructors from large distances and other costs involving adding these people to the teaching staff.</p><p>Donations can also be made towards Lark Camp expenses just to help make ends meet.</p><p>You can donate to \"Friends Of Lark Camp\" specifically for helping to bring teachers that have extraordinary expenses to Lark Camp and Lark Camp expenses. Please go to the <a href='http://www.larkcamp.com/Donate.html' target='_blank'>\"Friends Of Lark Camp\"</a> Website for complete information. Donations to \"Friends Of Lark Camp\" is by check only.</p>" },
            "ui:help": "To donate along with your camp reservation"
        },
        "woodlands_donation": {
            "ui:help": "This does not go to Lark Camp but benefits the Mendocino Woodlands"
        }
    },
    "dataSchema": {
        "definitions": {
            "camping_preference": {
                "type": "string",
                "enum": ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L"]
            },
            "natural": {
                "type": "integer",
                "minimum": 0,
                "default": 0
            },
            "shirt_count": {
                "type": "integer",
                "minimum": 0,
                "maximum": 9,
                "default": 0
            },
            "sizes": {
                "type": "object",
                "title": "Sizes",
                "properties": {
                    "small": { "$ref": "#/definitions/shirt_count" },
                    "medium": { "$ref": "#/definitions/shirt_count" },
                    "large": { "$ref": "#/definitions/shirt_count" },
                    "xl": { "$ref": "#/definitions/shirt_count" },
                    "xxl": { "$ref": "#/definitions/shirt_count" }
                }
            },
            "address": {
                "type": "object",
                "title": "Address",
                "properties": {
                    "street_address": {
                        "type": "string",
                        "maxLength": 50,
                        "title": "Address"
                    },
                    "city": {
                        "type": "string",
                        "maxLength": 50,
                        "title": "City"
                    },
                    "state_or_province": {
                        "type": "string",
                        "maxLength": 50,
                        "title": "State or Province"
                    },
                    "zip_code":     {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 10,
                        "title": "Zipcode or Postal Code"
                    },
                    "country": {
                        "type": "string",
                        "title": "Country",
                        "enum": [ "Afghanistan", "Åland Islands", "Albania", "Algeria", "American Samoa", "Andorra", "Angola", "Anguilla", "Antarctica", "Antigua and Barbuda", "Argentina", "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bermuda", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Bouvet Island", "Brazil", "British Indian Ocean Territory", "Brunei Darussalam", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Canada", "Cape Verde", "Cayman Islands", "Central African Republic", "Chad", "Chile", "China", "Christmas Island", "Cocos (Keeling) Islands", "Colombia", "Comoros", "Congo", "Congo, The Democratic Republic of the", "Cook Islands", "Costa Rica", "Côte_d'Ivoire", "Croatia", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Ethiopia", "Falkland Islands (Malvinas)", "Faroe Islands", "Fiji", "Finland", "France", "French Guiana", "French Polynesia", "French Southern Territories", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Gibraltar", "Greece", "Greenland", "Grenada", "Guadeloupe", "Guam", "Guatemala", "Guernsey", "Guinea", "Guinea-bissau", "Guyana", "Haiti", "Heard Island and Mcdonald Islands", "Holy See (Vatican City State)", "Honduras", "Hong Kong", "Hungary", "Iceland", "India", "Indonesia", "Iran, Islamic Republic of", "Iraq", "Ireland", "Isle of Man", "Israel", "Italy", "Jamaica", "Japan", "Jersey", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Korea, Democratic People's Republic of", "Korea, Republic of", "Kuwait", "Kyrgyzstan", "Lao People's Democratic Republic", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libyan Arab Jamahiriya", "Liechtenstein", "Lithuania", "Luxembourg", "Macao", "Macedonia, The Former Yugoslav Republic of", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Martinique", "Mauritania", "Mauritius", "Mayotte", "Mexico", "Micronesia, Federated States of", "Moldova, Republic of", "Monaco", "Mongolia", "Montenegro", "Montserrat", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nepal", "Netherlands", "Netherlands Antilles", "New Caledonia", "New Zealand", "Nicaragua", "Niger", "Nigeria", "Niue", "Norfolk Island", "Northern Mariana Islands", "Norway", "Oman", "Pakistan", "Palau", "Palestinian Territory", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Pitcairn", "Poland", "Portugal", "Puerto Rico", "Qatar", "Reunion", "Romania", "Russian Federation", "Rwanda", "Saint Barthélemy", "Saint Helena", "Saint Kitts and Nevis", "Saint Lucia", "Saint Martin", "Saint Pierre and Miquelon", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "South Georgia and the South Sandwich Islands", "Spain", "Sri Lanka", "Sudan", "Suriname", "Svalbard and Jan Mayen", "Swaziland", "Sweden", "Switzerland", "Syrian Arab Republic", "Taiwan, Republic of China", "Tajikistan", "Tanzania, United Republic of", "Thailand", "Timor-leste", "Togo", "Tokelau", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Turks and Caicos Islands", "Tuvalu", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "United States Minor Outlying Islands", "Uruguay", "Uzbekistan", "Vanuatu", "Venezuela", "Vietnam", "Virgin Islands, British", "Virgin Islands, U.S.", "Wallis and Futuna", "Western Sahara", "Yemen", "Zambia", "Zimbabwe" ],
                        "default": "United States"
                    }
                },
                "required": ["street_address", "city", "state_or_province", "zip_code", "country"]
            },
            "accomodations": {
                "type": "object",
                "title": "Accomodations",
                "properties": {
                    "camp_preference": {
                        "type": "string",
                        "title": "Camp Preference",
                        "enum": ["Camp 1", "Camp 2", "Camp 3"]
                    },
                    "accomodation_preference": {
                        "type": "string",
                        "title": "Accomodation Preference",
                        "enum": ["Cabin", "Tent", "Vehicle Camping"]
                    }
                },
                "dependencies": {
                    "accomodation_preference": {
                        "oneOf": [
                            {
                                "properties": {
                                    "accomodation_preference": {
                                        "enum": ["Cabin"]
                                    },
                                    "cabinmates": {
                                        "type": "array",
                                        "title": "Who would you like to be in a cabin with? (if in a cabin)",
                                        "items": {
                                            "type": "string",
                                            "maxLength": 50,
                                            "title": "Camper Name"
                                        }
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "accomodation_preference": {
                                        "enum": ["Tent"]
                                    },
                                    "tent_or_vehicle_mates": {
                                        "type": "array",
                                        "title": "Who will be in your tent/vehicle with you?",
                                        "items": {
                                            "type": "string",
                                            "maxLength": 50,
                                            "title": "Name"
                                        }
                                    },
                                    "tenting_area_preference": {
                                        "type": "object",
                                        "title": "What are your tent area preferences, in order?",
                                        "properties": {
                                            "first_choice": {
                                                "$ref": "#/definitions/camping_preference",
                                                "title": "First choice spot"
                                            },
                                            "second_choice": {
                                                "$ref": "#/definitions/camping_preference",
                                                "title": "Second choice spot"
                                            },
                                            "third_choice": {
                                                "$ref": "#/definitions/camping_preference",
                                                "title": "Third choice spot"
                                            },
                                            "fourth_choice": {
                                                "$ref": "#/definitions/camping_preference",
                                                "title": "Fourth choice spot"
                                            }
                                        }
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "accomodation_preference": {
                                        "enum": ["Vehicle Camping"]
                                    },
                                    "tent_or_vehicle_mates": {
                                        "type": "array",
                                        "title": "Who will be in your tent/vehicle with you? (if in a vehicle or tent)",
                                        "items": {
                                            "type": "string",
                                            "maxLength": 50,
                                            "title": "Name"
                                        }
                                    }
                                }
                            }
                        ]
                    }
                }
            },
            "meals": {
                "type": "object",
                "title": "Meals",
                "properties": {
                    "meal_plan": {
                        "type": "string",
                        "title": "What meals will you purchase?",
                        "enum": [
                            "None",
                            "Full Camp, All Meals",
                            "Full Camp, Just Dinners",
                            "Half Camp (first half), All Meals",
                            "Half Camp (second half), All Meals"
                        ]
                    }
                },
                "dependencies": {
                    "meal_plan": {
                        "oneOf": [
                            {
                                "properties": {
                                    "meal_plan": {
                                        "enum": ["None"]
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "meal_plan": {
                                        "enum": [
                                            "Full Camp, All Meals",
                                            "Full Camp, Just Dinners",
                                            "Half Camp (first half), All Meals",
                                            "Half Camp (second half), All Meals"
                                        ]
                                    },
                                    "meal_type": {
                                        "type": "string",
                                        "title": "What types of meals do you want?",
                                        "enum": [
                                            "Non-Vegetarian",
                                            "Vegetarian",
                                            "Vegan"
                                        ]
                                    }
                                }
                            }
                        ]
                    }
                }
            }
        },
        "title": "Lark Camp Registration",
        "type": "object",
        "required": ["payer_first_name", "payer_last_name", "payer_email", "payer_phone"],
        "properties": {
            "payer_first_name": {
                "type": "string",
                "maxLength": 50,
                "title": "Payer First Name"
            },
            "payer_last_name": {
                "type": "string",
                "maxLength": 50,
                "title": "Payer Last Name"
            },
            "payer_billing_address": { 
                "$ref": "#/definitions/address"
            },
            "payer_email": {
                "type": "string",
                "format": "email",
                "title": "Email"
            },
            "payer_number": {
                "type": "string",
                "maxLength": 20,
                "pattern": "^((.*?[0-9].*?){10,}|NONE)$",
                "title": "Phone Number"
            },
            "payment_type": {
                "type": "string",
                "title": "Payment Type",
                "enum": [
                    "Credit Card",
                    "Paypal",
                    "Check"
                ]
            },
            "campers": {
                "title": "Campers",
                "type": "array",
                "minItems": 1,
                "maxItems": 8,
                "items": {
                    "type": "object",
                    "required": ["first_name", "last_name"],
                    "properties": {
                        "first_name": {
                            "type": "string",
                            "maxLength": 50,
                            "title": "First name"
                        },
                        "last_name": {
                            "type": "string",
                            "maxLength": 50,
                            "title": "Last name"
                        },
                        "gender": {
                            "type": "string",
                            "title": "Gender",
                            "enum": ["Male", "Female", "Other"]
                        },
                        "age": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 100,
                            "title": "Age, if under 18"
                        },
                        "camper_address": { 
                            "$ref": "#/definitions/address"
                        },
                        "session": {
                            "type": "string",
                            "title": "Which session will you be attending?",
                            "enum": [
                                "Full camp",
                                "Half camp (1st half)",
                                "Half camp (2nd half)"
                            ]
                        },
                        "accomodations": {
                            "$ref": "#/definitions/accomodations"
                        },
                        "meals": {
                            "$ref": "#/definitions/meals"
                        }
                    }
                }
            },
            "parking_passes": {
                "type": "array",
                "title": "Parking Passes",
                "minItems": 0,
                "maxItems": 4,
                "items": {
                    "type": "object",
                    "title": "Parking Pass",
                    "properties": {
                        "holder": {
                            "type": "string",
                            "maxLength": 50,
                            "title": "Whose name will the parking pass be in?"
                        }
                    }
                }
            },
            "tshirt_sizes": {
                "$ref": "#/definitions/sizes",
                "title": "T-shirt Sizes"
            },
            "sweatshirt_sizes": {
                "$ref": "#/definitions/sizes",
                "title": "Sweatshirt Sizes"
            },
            "lta_donation": {
                "type": "integer",
                "minimum": 0,
                "title": "Donation to Lark Traditional Arts (Tax Deductible, Dollars)"
            },
            "woodlands_donation": {
                "type": "integer",
                "minimum": 0,
                "title": "Donation to the Mendicino Woodlands (Tax Deductible, Dollars)"
            },
            "how_did_you_hear": {
                "type": "string",
                "maxLength": 50,
                "title": "How did you hear about Lark Camp?"
            },
            "comments": {
                "type": "string",
                "maxLength": 500,
                "title": "Comments"
            }
        }
    },
    "pricingLogic": {
        "+": [
            {"reduce": [
                {"var": "campers"},
                {"+":[
                    {"var": "accumulator"},
                    { "if": [{ ">": [{"var": ["current.age", 18]}, 11]}, 
                        { "+": [
                            { "if": [
                                { "===": ["Full camp", {"var": "current.session"}]}, 784,
                                { "===": ["Half camp (1st half)", {"var": "current.session"}]}, 596,
                                { "===": ["Half camp (2nd half)", {"var": "current.session"}]}, 596,
                                0
                            ]},
                            { "if": [
                                { "===": ["None", {"var": "current.meals.meal_plan"}]}, 0,
                                { "===": ["Full Camp, All Meals", {"var": "current.meals.meal_plan"}]}, 406,
                                { "===": ["Full Camp, Just Dinners", {"var": "current.meals.meal_plan"}]}, 230,
                                { "===": ["Half Camp (first half), All Meals", {"var": "current.meals.meal_plan"}]}, 230,
                                { "===": ["Half Camp (second half), All Meals", {"var": "current.meals.meal_plan"}]}, 230,
                                0
                            ]}
                        ]},
                        { "+": [
                            { "if": [
                                { ">": [{"var": ["current.age", 18]}, 3]},
                                {  "if": [
                                    { "===": ["Full camp", {"var": "current.session"}]}, 596,
                                    { "===": ["Half camp (1st half)", {"var": "current.session"}]}, 484,
                                    { "===": ["Half camp (2nd half)", {"var": "current.session"}]}, 484,
                                    0
                                ]},
                                0
                            ]},
                            { "if": [
                                { "===": ["None", {"var": "current.meals.meal_plan"}]}, 0,
                                { "===": ["Full Camp, All Meals", {"var": "current.meals.meal_plan"}]}, 304,
                                { "===": ["Full Camp, Just Dinners", {"var": "current.meals.meal_plan"}]}, 166,
                                { "===": ["Half Camp (first half), All Meals", {"var": "current.meals.meal_plan"}]}, 166,
                                { "===": ["Half Camp (second half), All Meals", {"var": "current.meals.meal_plan"}]}, 166,
                                0
                            ]}
                        ]}
                    ]}
                ]},
                0
            ]},
            { "if": [
                { "===": [
                    { "var": "payment_type" },
                    "Check"
                ]},
                {"reduce": [
                    {"var": "campers"},
                    {"+":[
                        {"var": "accumulator"},
                        {  "if": [
                            { "===": ["Full camp", {"var": "current.session"}]}, -20,
                            { "===": ["Half camp (1st half)", {"var": "current.session"}]}, -10,
                            { "===": ["Half camp (2nd half)", {"var": "current.session"}]}, -10,
                            0
                        ]}
                    ]},
                    0
                ]},
                0
            ]},
            {"reduce": [
                {"var": "parking_passes"},
                {"+":[
                    {"var": "accumulator"},
                    62
                ]},
                0
            ]},
            {"*": [{"var": ["tshirt_sizes.small", 0]}, 14]},
            {"*": [{"var": ["tshirt_sizes.medium", 0]}, 14]},
            {"*": [{"var": ["tshirt_sizes.large", 0]}, 14]},
            {"*": [{"var": ["tshirt_sizes.xl", 0]}, 14]},
            {"*": [{"var": ["tshirt_sizes.xxl", 0]}, 16]},
            {"*": [{"var": ["sweatshirt_sizes.small", 0]}, 22]},
            {"*": [{"var": ["sweatshirt_sizes.medium", 0]}, 22]},
            {"*": [{"var": ["sweatshirt_sizes.large", 0]}, 22]},
            {"*": [{"var": ["sweatshirt_sizes.xl", 0]}, 22]},
            {"*": [{"var": ["sweatshirt_sizes.xxl", 0]}, 24]},
            {"var": ["lta_donation", 0]},
            {"var": ["woodlands_donation", 0]}
        ]
    }
}
